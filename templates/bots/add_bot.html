{% extends 'base.html' %}

{% block content %}
  <div class="container is-fluid mb-6">
    <form method="post">
      <h1 class="title is-2 has-text-centered">Add new bot</h1>

      <div class="field is-horizontal">
        <div class="field-label is-normal">
          <label class="label">Bot name</label>
        </div>
        <div class="field-body">
          <div class="field">
            <div class="control">
              <input class="input" type="text" name="bot_name"
                     placeholder="Bot name" aria-label="Bot name" required>
              {% with messages = get_flashed_messages(category_filter=['bot--name']) %}
                {% if messages %}
                  <p class="help is-danger">{{ messages[0] }}</p>
                {% endif %}
              {% endwith %}
            </div>
          </div>
        </div>
      </div>

      <div class="field is-horizontal">
        <div class="field-label is-normal">
          <label class="label">Bot category</label>
        </div>
        <div class="field-body">
          <div class="field">
            <div class="select">
              <select name="bot_category" aria-label="Bot category">
                <option value="">Uncategorized</option>
                {% for category in categories %}
                  <option value="{{ category.id }}">{{ category.name }}</option>
                {% endfor %}
              </select>
            </div>
          </div>
        </div>
      </div>

      <hr>

      <div class="field is-horizontal">
        <div class="field-label is-normal">
          <label class="label">Credentials</label>
        </div>
        <div class="field-body">
          <div class="field">
            <div class="control">
              <input class="input" type="email" name="username"
                     placeholder="Email" aria-label="Username" required>
              {% with messages = get_flashed_messages(category_filter=['bot--credentials']) %}
                {% if messages %}
                  <p class="help is-danger">{{ messages[0] }}</p>
                {% endif %}
              {% endwith %}
            </div>
          </div>
          <div class="field">
            <div class="control">
              <input class="input" type="password" name="password"
                     placeholder="Password" aria-label="Password" required>
            </div>
          </div>
        </div>
      </div>

      <div class="field is-horizontal">
        <div class="field-label is-normal">
          <label class="label">Bookmaker</label>
        </div>
        <div class="field-body">
          <div class="field">
            <div class="select">
              <select name="bookmaker" aria-label="Bookmaker">
                <option value="BETSSON">Betsson</option>
                <option value="BETSAFE">Betsafe</option>
              </select>
            </div>
          </div>
        </div>
      </div>

      <div class="field is-horizontal">
        <div class="field-label is-normal">
          <label class="label">Proxy country</label>
        </div>
        <div class="field-body">
          <div class="field">
            <div class="select">
              <select name="country_code" aria-label="Proxy country">
                {% for country_code, country_name in proxies.items() %}
                  <option value="{{ country_code }}">{{ country_name }}</option>
                {% endfor %}
              </select>
            </div>
          </div>
        </div>
      </div>

      <div class="field is-horizontal">
        <div class="field-label"></div>
        <div class="field-body">
          <div class="field">
            <div class="control">
              <button type="submit" class="button is-primary">
                Add bot
              </button>
            </div>
          </div>
        </div>
      </div>
    </form>

    <h1 class="title is-2 has-text-centered mt-5">Manage categories</h1>

    <form action="{{ url_for('bots.add_category') }}" method="post" class="mb-2">
      <div class="field is-horizontal">
        <div class="field-label is-normal"></div>
        <div class="field-body">
          <div class="field has-addons">
            <div class="control">
              <input class="input" type="text" name="category_name"
                     placeholder="Category name" aria-label="Category name" required>
              {% with messages = get_flashed_messages(category_filter=['category_add--name']) %}
                {% if messages %}
                  <p class="help is-danger">{{ messages[0] }}</p>
                {% endif %}
              {% endwith %}
            </div>
            <div class="control">
              <button type="submit" class="button is-primary">Add</button>
            </div>
          </div>
        </div>
      </div>
    </form>

    <form action="{{ url_for('bots.modify_category') }}" method="post" class="mb-2">
      <div class="field is-horizontal">
        <div class="field-label is-normal"></div>
        <div class="field-body">
          <div class="field has-addons">
            <div class="control">
              <div class="select">
                <select name="category_id" aria-label="Bot category">
                  {% for category in categories %}
                    <option value="{{ category.id }}">{{ category.name }}</option>
                  {% endfor %}
                </select>
              </div>
            </div>
            <div class="control">
              <input class="input" type="text" name="category_name"
                     placeholder="Category name" aria-label="Category name" required>
              {% with messages = get_flashed_messages(category_filter=['category_mod--name']) %}
                {% if messages %}
                  <p class="help is-danger">{{ messages[0] }}</p>
                {% endif %}
              {% endwith %}
            </div>
            <div class="control">
              <button type="submit" class="button is-info">Modify</button>
            </div>
          </div>
        </div>
      </div>
    </form>

    <form action="{{ url_for('bots.delete_category') }}" method="post">
      <div class="field is-horizontal">
        <div class="field-label is-normal"></div>
        <div class="field-body">
          <div class="field has-addons">
            <div class="control">
              <div class="select">
                <select name="category_id" aria-label="Bot category">
                  {% for category in categories %}
                    <option value="{{ category.id }}">{{ category.name }}</option>
                  {% endfor %}
                </select>
              </div>
            </div>
            <div class="control">
              <button type="submit" class="button is-danger">Delete</button>
            </div>
          </div>
        </div>
      </div>
    </form>
  </div>
{% endblock %}
